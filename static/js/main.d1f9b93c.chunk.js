(this["webpackJsonpreact-google-books"]=this["webpackJsonpreact-google-books"]||[]).push([[0],{26:function(e,t,s){},35:function(e,t,s){"use strict";s.r(t);var o=s(1),c=s.n(o),n=s(12),i=s.n(n),a=(s(26),Object(o.createContext)()),r=s(10),l=s(8),j={key:"AIzaSyAwmoNcoRmL5Ziiy43ZGrNtQripDMEgIE8"},d=s(0),b=Object(r.a)((function(){var e=Object(o.useContext)(a).MainStore,t=function(t){e.setLoad(!0);var s="&key=".concat(j.key);fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t)+s).then((function(e){return e.json()})).then((function(t){e.setBooks(t),setTimeout((function(){e.setAbility(!0),e.setLoad(!1)}),2e3)}))};return Object(d.jsxs)("header",{className:"container pt-3 pb-3 mt-3",children:[Object(d.jsx)("h1",{className:"text-center text-white fw-bold",children:"Search for books"}),Object(d.jsx)("div",{className:"row justify-content-center",children:Object(d.jsx)("div",{className:"col-4",children:Object(d.jsxs)("div",{className:"input-group mb-3",children:[Object(d.jsx)("input",{type:"text",className:"form-control",placeholder:"Book title",value:e.seacrh,onChange:function(t){e.setAbility(!1),e.setSearch(t.target.value)},onKeyDown:function(s){"Enter"===s.key&&t(e.options)}}),Object(d.jsx)(l.b,{className:"btn btn-success",type:"submit",id:"button-addon2",onClick:function(){return t(e.options)},to:"/",children:Object(d.jsx)("i",{className:"bi bi-search"})})]})})}),Object(d.jsxs)("div",{className:"row justify-content-center mt-3",children:[Object(d.jsx)("div",{className:"col-2",children:Object(d.jsxs)("select",{className:"form-select",defaultValue:"All",onChange:function(t){e.resetIndex(),e.setAbility(!1),e.setCategory(t.target.value)},children:[Object(d.jsx)("option",{value:"0",disabled:!0,children:"Categories"}),Object(d.jsx)("option",{value:"All",children:"All"}),Object(d.jsx)("option",{value:"Art",children:"Art"}),Object(d.jsx)("option",{value:"Biography",children:"Biography"}),Object(d.jsx)("option",{value:"Computers",children:"Computers"}),Object(d.jsx)("option",{value:"History",children:"History"}),Object(d.jsx)("option",{value:"Medical",children:"Medical"}),Object(d.jsx)("option",{value:"Poetry",children:"Poetry"})]})}),Object(d.jsx)("div",{className:"col-2",children:Object(d.jsxs)("select",{className:"form-select",defaultValue:"relevance",onChange:function(t){e.resetIndex(),e.setAbility(!1),e.setSort(t.target.value)},children:[Object(d.jsx)("option",{value:"relevance",children:"Relevance"}),Object(d.jsx)("option",{value:"newest",children:"Newest"})]})})]})]})})),u=function(e){var t,s,o,c=e.book;return Object(d.jsx)(l.b,{to:"/book/".concat(c.id),className:"col-md-6 col-xl-4 p-2",children:Object(d.jsxs)("div",{className:"h-100 row m-0 bg-success p-2 text-white bg-opacity-75 rounded-3 bookCard",children:[Object(d.jsx)("div",{className:"col w-25",children:Object(d.jsx)("img",{src:null===(t=c.volumeInfo.imageLinks)||void 0===t?void 0:t.thumbnail,alt:"Title page"})}),Object(d.jsxs)("div",{className:"col w-75",children:[Object(d.jsx)("p",{children:c.volumeInfo.title}),Object(d.jsxs)("p",{children:["Categories: ",null===(s=c.volumeInfo.categories)||void 0===s?void 0:s[0]]}),Object(d.jsxs)("p",{children:["Authors: ",null===(o=c.volumeInfo.authors)||void 0===o?void 0:o.join(", ")]})]})]})})},h=function(){return Object(d.jsx)("div",{className:"spinner-border",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},m=Object(r.a)((function(){var e=Object(o.useContext)(a).MainStore;return Object(d.jsx)("main",{className:"container",children:Object(d.jsx)("div",{className:"row m-2",children:e.books.totalItems?Object(d.jsx)(d.Fragment,{children:e.isLoad&&!e.abilityToLoadMore?Object(d.jsx)("div",{className:"container text-center",children:Object(d.jsx)(h,{})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"container text-center",children:Object(d.jsxs)("h5",{children:["Total founds: ",e.books.totalItems]})}),e.books.items.map((function(e){return Object(d.jsx)(u,{book:e},e.id)})),e.abilityToLoadMore?Object(d.jsx)("div",{className:"container text-center",children:e.isLoad?Object(d.jsx)(h,{}):Object(d.jsx)("button",{type:"button",className:"btn btn-success btn-lg m-5",onClick:function(){return t=e.options,s=e.startIndex,e.setLoad(!0),void fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t,"&startIndex=").concat(s,"&key=").concat(j.key)).then((function(e){return e.json()})).then((function(t){e.incrementIndex(),e.addItems(t.items),e.setLoad(!1)}));var t,s},children:"Load more"})}):Object(d.jsx)(d.Fragment,{})]})}):Object(d.jsx)(d.Fragment,{})})})})),x=s(2),v=Object(r.a)((function(){var e,t,s=Object(x.g)().id,c=Object(o.useContext)(a).MainStore;return Object(o.useEffect)((function(){c.setLoad(!0),fetch("https://www.googleapis.com/books/v1/volumes/".concat(s)).then((function(e){return e.json()})).then((function(e){c.setBook(e),c.setLoad(!1)}))}),[]),Object(d.jsx)("div",{className:"container border p-3",children:c.isLoad?Object(d.jsx)(h,{}):Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-4 p-3",children:Object(d.jsx)("img",{src:null===(e=c.book.volumeInfo.imageLinks)||void 0===e?void 0:e.thumbnail,alt:"Title page",className:"w-100"})}),Object(d.jsxs)("div",{className:"col-8 p-3",children:[Object(d.jsx)("p",{className:"fs-6 mb-3 text-secondary",children:c.book.volumeInfo.categories}),Object(d.jsx)("p",{className:"fs-2 fw-bold",children:c.book.volumeInfo.title}),Object(d.jsx)("p",{className:"text-white bg-success",children:null===(t=c.book.volumeInfo.authors)||void 0===t?void 0:t.join(", ")}),Object(d.jsx)("p",{className:"p-2 border ",dangerouslySetInnerHTML:{__html:c.book.volumeInfo.description}})]})]})})})})),O=s(21),p=s(19),f=s(20),g=s(4),k=new(function(){function e(){Object(p.a)(this,e),this.books={totalItems:0,items:[]},this.book={volumeInfo:{imageLinks:{},categories:[],authors:[],description:""}},this.category="All",this.sorting="relevance",this.isLoad=!1,this.search="",this.startIndex=30,this.abilityToLoadMore=!1,Object(g.d)(this)}return Object(f.a)(e,[{key:"setSearch",value:function(e){this.search=e}},{key:"incrementIndex",value:function(){this.startIndex+=30}},{key:"resetIndex",value:function(){this.startIndex=30}},{key:"setAbility",value:function(e){this.abilityToLoadMore=e}},{key:"setBooks",value:function(e){this.books=e}},{key:"setBook",value:function(e){this.book=e}},{key:"setCategory",value:function(e){this.category=e}},{key:"setSort",value:function(e){this.sorting=e}},{key:"setLoad",value:function(e){this.isLoad=e}},{key:"addItems",value:function(e){var t;(t=this.books.items).push.apply(t,Object(O.a)(e))}},{key:"options",get:function(){var e="All"!==this.category?"+subject:".concat(this.category):"",t="relevance"!==this.sorting?"&orderBy=".concat(this.sorting):"";return this.search+e+t+"&maxResults=30"}}]),e}()),y=function(){return Object(d.jsx)("div",{className:"App min-vh-100 border",children:Object(d.jsx)(a.Provider,{value:{MainStore:k},children:Object(d.jsxs)(l.a,{children:[Object(d.jsx)(b,{}),Object(d.jsxs)(x.d,{children:[Object(d.jsx)(x.b,{path:"/",exact:!0,component:m}),Object(d.jsx)(x.b,{path:"/book/:id",component:v}),Object(d.jsx)(x.a,{to:"/"})]})]})})})};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(y,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.d1f9b93c.chunk.js.map