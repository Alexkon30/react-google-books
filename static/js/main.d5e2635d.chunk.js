(this["webpackJsonpreact-google-books"]=this["webpackJsonpreact-google-books"]||[]).push([[0],{26:function(e,t,o){},35:function(e,t,o){"use strict";o.r(t);var s=o(1),c=o.n(s),n=o(12),i=o.n(n),a=(o(26),Object(s.createContext)()),l=o(10),r=o(8),d={key:"AIzaSyAwmoNcoRmL5Ziiy43ZGrNtQripDMEgIE8"},j=o(0),b=Object(l.a)((function(){var e=Object(s.useContext)(a).MainStore,t=function(t){e.setLoad(!0);var o="&key=".concat(d.key);fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t)+o).then((function(e){return e.json()})).then((function(t){e.setBooks(t),setTimeout((function(){e.setAbility(!0),e.setLoad(!1)}),2e3)}))};return Object(j.jsxs)("header",{className:"container pt-3 pb-3 mt-3",children:[Object(j.jsx)("h1",{className:"text-center text-white fw-bold",children:"Search for books"}),Object(j.jsx)("div",{className:"row justify-content-center",children:Object(j.jsx)("div",{className:"col-md-8 col-lg-6 col-10",children:Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("input",{type:"text",className:"form-control",placeholder:"Book title",value:e.seacrh,onChange:function(t){e.setAbility(!1),e.setSearch(t.target.value)},onKeyDown:function(o){"Enter"===o.key&&t(e.options)}}),Object(j.jsx)(r.b,{className:"btn btn-success",type:"submit",id:"button-addon2",onClick:function(){return t(e.options)},to:"/",children:Object(j.jsx)("i",{className:"bi bi-search"})})]})})}),Object(j.jsxs)("div",{className:"row justify-content-center mt-3",children:[Object(j.jsx)("div",{className:"col-sm-4 col-md-3 col-lg-3 col-7 mb-2",children:Object(j.jsxs)("select",{className:"form-select",defaultValue:"All",onChange:function(t){e.resetIndex(),e.setAbility(!1),e.setCategory(t.target.value)},children:[Object(j.jsx)("option",{value:"0",disabled:!0,children:"Categories"}),Object(j.jsx)("option",{value:"All",children:"All"}),Object(j.jsx)("option",{value:"Art",children:"Art"}),Object(j.jsx)("option",{value:"Biography",children:"Biography"}),Object(j.jsx)("option",{value:"Computers",children:"Computers"}),Object(j.jsx)("option",{value:"History",children:"History"}),Object(j.jsx)("option",{value:"Medical",children:"Medical"}),Object(j.jsx)("option",{value:"Poetry",children:"Poetry"})]})}),Object(j.jsx)("div",{className:"col-sm-4 col-md-3 col-lg-3 col-7",children:Object(j.jsxs)("select",{className:"form-select",defaultValue:"relevance",onChange:function(t){e.resetIndex(),e.setAbility(!1),e.setSort(t.target.value)},children:[Object(j.jsx)("option",{value:"relevance",children:"Relevance"}),Object(j.jsx)("option",{value:"newest",children:"Newest"})]})})]})]})})),u=function(e){var t,o,s,c=e.book;return Object(j.jsx)(r.b,{to:"/book/".concat(c.id),className:"col-md-6 col-xl-4 p-2",children:Object(j.jsxs)("div",{className:"h-100 row m-0 bg-success p-2 text-white bg-opacity-75 rounded-3 bookCard",children:[Object(j.jsx)("div",{className:"col w-25",children:Object(j.jsx)("img",{src:null===(t=c.volumeInfo.imageLinks)||void 0===t?void 0:t.thumbnail,alt:"Title page"})}),Object(j.jsxs)("div",{className:"col w-75",children:[Object(j.jsx)("p",{children:c.volumeInfo.title}),Object(j.jsxs)("p",{children:["Categories: ",null===(o=c.volumeInfo.categories)||void 0===o?void 0:o[0]]}),Object(j.jsxs)("p",{children:["Authors: ",null===(s=c.volumeInfo.authors)||void 0===s?void 0:s.join(", ")]})]})]})})},h=function(){return Object(j.jsx)("div",{className:"spinner-border",role:"status",children:Object(j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},m=Object(l.a)((function(){var e=Object(s.useContext)(a).MainStore;return Object(j.jsx)("main",{className:"container",children:Object(j.jsx)("div",{className:"row m-2",children:e.books.totalItems?Object(j.jsx)(j.Fragment,{children:e.isLoad&&!e.abilityToLoadMore?Object(j.jsx)("div",{className:"container text-center",children:Object(j.jsx)(h,{})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container text-center",children:Object(j.jsxs)("h5",{children:["Total founds: ",e.books.totalItems]})}),e.books.items.map((function(e){return Object(j.jsx)(u,{book:e},e.id)})),e.abilityToLoadMore?Object(j.jsx)("div",{className:"container text-center",children:e.isLoad?Object(j.jsx)(h,{}):Object(j.jsx)("button",{type:"button",className:"btn btn-success btn-lg m-5",onClick:function(){return t=e.options,o=e.startIndex,e.setLoad(!0),void fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t,"&startIndex=").concat(o,"&key=").concat(d.key)).then((function(e){return e.json()})).then((function(t){e.incrementIndex(),e.addItems(t.items),e.setLoad(!1)}));var t,o},children:"Load more"})}):Object(j.jsx)(j.Fragment,{})]})}):Object(j.jsx)(j.Fragment,{})})})})),x=o(2),v=Object(l.a)((function(){var e,t,o=Object(x.g)().id,c=Object(s.useContext)(a).MainStore;return Object(s.useEffect)((function(){c.setLoad(!0),fetch("https://www.googleapis.com/books/v1/volumes/".concat(o)).then((function(e){return e.json()})).then((function(e){c.setBook(e),c.setLoad(!1)}))}),[]),Object(j.jsx)("div",{className:"container border p-3",children:c.isLoad?Object(j.jsx)(h,{}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-4 col-12 p-3",children:Object(j.jsx)("img",{src:null===(e=c.book.volumeInfo.imageLinks)||void 0===e?void 0:e.thumbnail,alt:"Title page",className:"w-100"})}),Object(j.jsxs)("div",{className:"col-md-8 col-12 p-3",children:[Object(j.jsx)("p",{className:"fs-6 mb-3 text-secondary",children:c.book.volumeInfo.categories}),Object(j.jsx)("p",{className:"fs-2 fw-bold",children:c.book.volumeInfo.title}),Object(j.jsx)("p",{className:"text-white bg-success",children:null===(t=c.book.volumeInfo.authors)||void 0===t?void 0:t.join(", ")}),Object(j.jsx)("p",{className:"p-2 border ",dangerouslySetInnerHTML:{__html:c.book.volumeInfo.description}})]})]})})})})),O=o(21),p=o(19),f=o(20),g=o(4),k=new(function(){function e(){Object(p.a)(this,e),this.books={totalItems:0,items:[]},this.book={volumeInfo:{imageLinks:{},categories:[],authors:[],description:""}},this.category="All",this.sorting="relevance",this.isLoad=!1,this.search="",this.startIndex=30,this.abilityToLoadMore=!1,Object(g.d)(this)}return Object(f.a)(e,[{key:"setSearch",value:function(e){this.search=e}},{key:"incrementIndex",value:function(){this.startIndex+=30}},{key:"resetIndex",value:function(){this.startIndex=30}},{key:"setAbility",value:function(e){this.abilityToLoadMore=e}},{key:"setBooks",value:function(e){this.books=e}},{key:"setBook",value:function(e){this.book=e}},{key:"setCategory",value:function(e){this.category=e}},{key:"setSort",value:function(e){this.sorting=e}},{key:"setLoad",value:function(e){this.isLoad=e}},{key:"addItems",value:function(e){var t;(t=this.books.items).push.apply(t,Object(O.a)(e))}},{key:"options",get:function(){var e="All"!==this.category?"+subject:".concat(this.category):"",t="relevance"!==this.sorting?"&orderBy=".concat(this.sorting):"";return this.search+e+t+"&maxResults=30"}}]),e}()),y=function(){return Object(j.jsx)("div",{className:"App min-vh-100 border",children:Object(j.jsx)(a.Provider,{value:{MainStore:k},children:Object(j.jsxs)(r.a,{children:[Object(j.jsx)(b,{}),Object(j.jsxs)(x.d,{children:[Object(j.jsx)(x.b,{path:"/",exact:!0,component:m}),Object(j.jsx)(x.b,{path:"/book/:id",component:v}),Object(j.jsx)(x.a,{to:"/"})]})]})})})};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.d5e2635d.chunk.js.map